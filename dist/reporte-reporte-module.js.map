{"version":3,"sources":["webpack:///./src/app/layout/reporte/app-routing.module.ts","webpack:///./src/app/layout/reporte/reporte.component.html","webpack:///./src/app/layout/reporte/reporte.component.scss","webpack:///./src/app/layout/reporte/reporte.component.ts","webpack:///./src/app/layout/reporte/reporte.module.ts"],"names":[],"mappings":"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","file":"reporte-reporte-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ReporteComponent } from './reporte.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReporteComponent\n  },\n\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","module.exports = \"<div [@routerTransition]>\\r\\n  <app-page-header [heading]=\\\"'Reportes'\\\" [icon]=\\\"'fa-edit'\\\"></app-page-header>\\r\\n   <div class=\\\"row\\\">\\r\\n    <div class=\\\"col col-xl-12 col-lg-12\\\">\\r\\n       <div class=\\\"card mb-3\\\">\\r\\n        <div class=\\\"card-header\\\">Reportes</div>\\r\\n         <div class=\\\"card-body \\\">\\r\\n           <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-md-3\\\">\\r\\n                <div class=\\\"card\\\">\\r\\n                \\r\\n                    <div class=\\\"card-body\\\">\\r\\n                      <p><strong>Eficiencia</strong></p>\\r\\n                      <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col\\\" class=\\\"table-success\\\" style=\\\"width: 15px\\\"></div>\\r\\n                        <div class=\\\"col\\\">Muy buena</div>\\r\\n                      </div>\\r\\n      \\r\\n                      <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col\\\" class=\\\"table-warning\\\" style=\\\"width: 15px\\\"></div>\\r\\n                        <div class=\\\"col\\\">Buena</div>\\r\\n                      </div>\\r\\n      \\r\\n                      <div class=\\\"row\\\">\\r\\n                        <div class=\\\"col\\\" class=\\\"table-danger\\\" style=\\\"width: 15px\\\"></div>\\r\\n                        <div class=\\\"col\\\">Regular</div>\\r\\n                      </div>\\r\\n                    </div>\\r\\n                  </div>\\r\\n            </div>\\r\\n            \\r\\n           \\r\\n          </div>\\r\\n           <br>\\r\\n           <table id=\\\"example-datatable\\\" class=\\\"table table-bordered\\\" datatable [dtOptions]=\\\"dtOptions\\\" [dtTrigger]=\\\"dtTrigger\\\">\\r\\n            <thead>\\r\\n               <tr>\\r\\n                 <th>Cliente</th>\\r\\n                <th>Veh√≠culo</th>\\r\\n                <th>Servicio</th>\\r\\n                <th>Operador</th>\\r\\n                <th>Tiempo Estandar</th>\\r\\n                <th>Lead Time</th>\\r\\n                <th>Tiempo Real</th>\\r\\n                <th>Eficiencia</th>\\r\\n               </tr>\\r\\n            </thead>\\r\\n            <tbody>\\r\\n              <tr *ngFor=\\\"let servicio of tareas \\\" \\r\\n              [class.table-success]=\\\"servicio.servicio.eficiencia>=100\\\" \\r\\n              [class.table-warning]=\\\"servicio.servicio.eficiencia>=80 && servicio.servicio.eficiencia<100\\\"\\r\\n                [class.table-danger]=\\\"servicio.servicio.eficiencia<80\\\"\\r\\n                >\\r\\n                 <td>\\r\\n                  {{servicio.cliente.nombre}}\\r\\n                </td>\\r\\n                <td>\\r\\n                  {{servicio.vehiculo.placa}} - {{servicio.vehiculo.marca}} - {{servicio.vehiculo.modelo}}\\r\\n                </td>\\r\\n                <td>\\r\\n                  {{servicio.servicio.descripcion}}\\r\\n                </td>\\r\\n                <td>\\r\\n                  {{servicio.servicio.operador.data.nombre}}\\r\\n                </td>\\r\\n                <td>\\r\\n                  {{servicio.servicio.tiempoEstandarFor}}\\r\\n                </td>\\r\\n                <td>\\r\\n                  {{servicio.servicio.leadTime}}\\r\\n                </td>\\r\\n                <td>\\r\\n                  {{servicio.servicio.tiempoReal}}\\r\\n                </td>\\r\\n                <td>\\r\\n                  {{servicio.servicio.eficiencia}}%\\r\\n                </td>\\r\\n               </tr>\\r\\n            </tbody>\\r\\n          </table>\\r\\n         </div>\\r\\n      </div>\\r\\n     </div>\\r\\n  </div>\\r\\n </div> \"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\r\nimport { routerTransition } from '../../router.animations';\r\nimport { Observable } from 'rxjs';\r\nimport { OrdenService } from '../../servicios/orden/orden.service';\r\nimport * as moment from 'moment';\r\nimport { DataTableDirective } from 'angular-datatables';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-reporte',\r\n  templateUrl: './reporte.component.html',\r\n  styleUrls: ['./reporte.component.scss'],\r\n  animations: [routerTransition()]\r\n})\r\nexport class ReporteComponent implements OnInit {\r\n\r\n  dtElement: DataTableDirective;\r\n  dtOptions: DataTables.Settings =  {\r\n    pagingType: 'full_numbers',\r\n    pageLength: 5,\r\n    autoWidth: true,\r\n   responsive: true,\r\n\r\n  };\r\n  dtTrigger: Subject<any> = new Subject();\r\n\r\n  ordenes: Observable<any[]>;\r\n  tareas: any[]\r\n\r\n  constructor(private ordenService: OrdenService) {\r\n\r\n\r\n\r\n\r\n    this.tareas = []\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.obtenerOrdenes()\r\n  }\r\n  obtenerOrdenes() {\r\n    this.ordenes = this.ordenService.obtenerOrdenes();\r\n\r\n    this.ordenes.subscribe(res => {\r\n      this.tareas = []\r\n      res.forEach(element => {\r\n        element.data.servicios.forEach(servicio => {\r\n          if (servicio.estado == 'POR FACTURAR') {\r\n\r\n\r\n            var fecha1 = moment(servicio.horaInicio.seconds, 'X');\r\n            var fecha2 = moment(servicio.horaFin.seconds, 'X');\r\n            var diff = fecha2.diff(fecha1, 's');\r\n            servicio.leadTimesec = diff\r\n            const leadTime = moment.utc(diff * 1000).format('HH:mm:ss');\r\n            servicio.leadTime = leadTime\r\n            const formatted = moment.utc((servicio.tiempoEstandar * 60) * 1000).format('HH:mm:ss');\r\n            servicio.tiempoEstandarFor = formatted\r\n\r\n            var pausas = 0\r\n\r\n            if (servicio.pausas) {\r\n              servicio.pausas.forEach(pausa => {\r\n                console.log(pausa)\r\n                var fecha1 = moment(pausa.horaInicio.seconds, 'X');\r\n                var fecha2 = moment(pausa.horaFin.seconds, 'X');\r\n                var diff2 = fecha2.diff(fecha1, 's');\r\n                pausas += diff2\r\n              });\r\n              \r\n            }\r\n\r\n            console.log('leadtime '+servicio.leadTimesec)\r\n            console.log('pausas '+pausas)\r\n       \r\n\r\n          \r\n            \r\n            var tiempoReal  =  servicio.leadTimesec - pausas\r\n            \r\n            servicio.tiempoReal = moment.utc((tiempoReal) * 1000).format('HH:mm:ss');\r\n\r\n            const eficiencia = ((servicio.tiempoEstandar*60)/tiempoReal)*100\r\n\r\n            servicio.eficiencia = eficiencia.toFixed(2)\r\n\r\n            this.tareas.push({ cliente: element.data.cliente, servicio: servicio, vehiculo: element.data.vehiculo })\r\n          \r\n\r\n          }\r\n\r\n        });\r\n\r\n\r\n      });\r\n\r\n      $('#example-datatable').DataTable().destroy();\r\n      this.dtTrigger.next();\r\n    })\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AppRoutingModule } from './/app-routing.module';\r\nimport { ReporteComponent } from './reporte.component';\r\nimport { PageHeaderModule } from '../../shared';\r\nimport { DataTablesModule } from 'angular-datatables';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    AppRoutingModule,\r\n    PageHeaderModule,\r\n    DataTablesModule\r\n  ],\r\n  declarations: [ReporteComponent]\r\n})\r\nexport class ReporteModule { }\r\n"],"sourceRoot":""}