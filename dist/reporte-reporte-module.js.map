{"version":3,"sources":["webpack:///./src/app/layout/reporte/app-routing.module.ts","webpack:///./src/app/layout/reporte/reporte.component.html","webpack:///./src/app/layout/reporte/reporte.component.scss","webpack:///./src/app/layout/reporte/reporte.component.ts","webpack:///./src/app/layout/reporte/reporte.module.ts"],"names":[],"mappings":"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","file":"reporte-reporte-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ReporteComponent } from './reporte.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ReporteComponent\n  },\n\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","module.exports = \"<div [@routerTransition]>\\n  <app-page-header [heading]=\\\"'Reportes'\\\" [icon]=\\\"'fa-edit'\\\"></app-page-header>\\n   <div class=\\\"row\\\">\\n    <div class=\\\"col col-xl-12 col-lg-12\\\">\\n       <div class=\\\"card mb-3\\\">\\n        <div class=\\\"card-header\\\">Reportes</div>\\n         <div class=\\\"card-body \\\">\\n           <div class=\\\"row\\\">\\n            <div class=\\\"col-md-3\\\">\\n                <div class=\\\"card\\\">\\n                \\n                    <div class=\\\"card-body\\\">\\n                      <p><strong>Eficiencia</strong></p>\\n                      <div class=\\\"row\\\">\\n                        <div class=\\\"col\\\" class=\\\"table-success\\\" style=\\\"width: 15px\\\"></div>\\n                        <div class=\\\"col\\\">Muy buena</div>\\n                      </div>\\n      \\n                      <div class=\\\"row\\\">\\n                        <div class=\\\"col\\\" class=\\\"table-warning\\\" style=\\\"width: 15px\\\"></div>\\n                        <div class=\\\"col\\\">Buena</div>\\n                      </div>\\n      \\n                      <div class=\\\"row\\\">\\n                        <div class=\\\"col\\\" class=\\\"table-danger\\\" style=\\\"width: 15px\\\"></div>\\n                        <div class=\\\"col\\\">Regular</div>\\n                      </div>\\n                    </div>\\n                  </div>\\n            </div>\\n           \\n          </div>\\n           <br>\\n           <table class=\\\"table table-bordered table-sm table-responsive\\\">\\n            <thead>\\n               <tr>\\n                 <th>Cliente</th>\\n                <th>Veh√≠culo</th>\\n                <th>Servicio</th>\\n                <th>Operador</th>\\n                <th>Tiempo Estandar</th>\\n                <th>Lead Time</th>\\n                <th>Tiempo Real</th>\\n                <th>Eficiencia</th>\\n               </tr>\\n            </thead>\\n            <tbody>\\n              <tr *ngFor=\\\"let servicio of tareas \\\" [class.table-success]=\\\"servicio.servicio.eficiencia>=100\\\" [class.table-warning]=\\\"servicio.servicio.eficiencia>=80 && servicio.servicio.eficiencia<100\\\"\\n                [class.table-danger]=\\\"servicio.servicio.eficiencia<80\\\">\\n                 <td>\\n                  {{servicio.cliente.nombre}}\\n                </td>\\n                <td>\\n                  {{servicio.vehiculo.placa}} - {{servicio.vehiculo.marca}} - {{servicio.vehiculo.modelo}}\\n                </td>\\n                <td>\\n                  {{servicio.servicio.descripcion}}\\n                </td>\\n                <td>\\n                  {{servicio.servicio.operador.data.nombre}}\\n                </td>\\n                <td>\\n                  {{servicio.servicio.tiempoEstandarFor}}\\n                </td>\\n                <td>\\n                  {{servicio.servicio.leadTime}}\\n                </td>\\n                <td>\\n                  {{servicio.servicio.tiempoReal}}\\n                </td>\\n                <td>\\n                  {{servicio.servicio.eficiencia}}%\\n                </td>\\n               </tr>\\n            </tbody>\\n          </table>\\n         </div>\\n      </div>\\n     </div>\\n  </div>\\n </div> \"","module.exports = \"\"","import { Component, OnInit } from '@angular/core';\nimport { routerTransition } from '../../router.animations';\nimport { Observable } from 'rxjs';\nimport { OrdenService } from '../../servicios/orden/orden.service';\nimport * as moment from 'moment';\n\n@Component({\n  selector: 'app-reporte',\n  templateUrl: './reporte.component.html',\n  styleUrls: ['./reporte.component.scss'],\n  animations: [routerTransition()]\n})\nexport class ReporteComponent implements OnInit {\n\n  ordenes: Observable<any[]>;\n  tareas: any[]\n\n  constructor(private ordenService: OrdenService) {\n\n\n\n\n    this.tareas = []\n  }\n\n  ngOnInit() {\n    this.obtenerOrdenes()\n  }\n  obtenerOrdenes() {\n    this.ordenes = this.ordenService.obtenerOrdenes();\n\n    this.ordenes.subscribe(res => {\n      this.tareas = []\n      res.forEach(element => {\n        element.data.servicios.forEach(servicio => {\n          if (servicio.estado == 'POR FACTURAR') {\n\n\n            var fecha1 = moment(servicio.horaInicio.seconds, 'X');\n            var fecha2 = moment(servicio.horaFin.seconds, 'X');\n            var diff = fecha2.diff(fecha1, 's');\n            servicio.leadTimesec = diff\n            const leadTime = moment.utc(diff * 1000).format('HH:mm:ss');\n            servicio.leadTime = leadTime\n            const formatted = moment.utc((servicio.tiempoEstandar * 60) * 1000).format('HH:mm:ss');\n            servicio.tiempoEstandarFor = formatted\n\n            var pausas = 0\n\n            if (servicio.pausas) {\n              servicio.pausas.forEach(pausa => {\n                var fecha1 = moment(pausa.horaInicio.seconds, 'X');\n                var fecha2 = moment(pausa.horaFin.seconds, 'X');\n                var diff = fecha2.diff(fecha1, 's');\n                pausas += diff\n              });\n              \n            }\n\n            console.log(servicio.leadTimesec)\n            console.log(pausas)\n       \n\n          \n            \n            var tiempoReal  =  servicio.leadTimesec - pausas\n            \n            servicio.tiempoReal = moment.utc((tiempoReal * 60) * 1000).format('HH:mm:ss');\n\n            const eficiencia = ((servicio.tiempoEstandar*60)/tiempoReal)*100\n\n            servicio.eficiencia = eficiencia.toFixed(2)\n\n            this.tareas.push({ cliente: element.data.cliente, servicio: servicio, vehiculo: element.data.vehiculo })\n\n\n          }\n\n        });\n\n\n      });\n    })\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AppRoutingModule } from './/app-routing.module';\nimport { ReporteComponent } from './reporte.component';\nimport { PageHeaderModule } from '../../shared';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    AppRoutingModule,\n    PageHeaderModule,\n  ],\n  declarations: [ReporteComponent]\n})\nexport class ReporteModule { }\n"],"sourceRoot":""}